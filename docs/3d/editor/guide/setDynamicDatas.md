在实际应用场景中，我们的很多数据都会实时产生变化。比如温度、位置、统计信息等等，而这些变化需要实时反映在场景中，仅通过属性编辑显然是无法完成的。那么我们有没有什么办法可以快速的将一些属性与后台数据绑定起来，使得后台仅需推送对应的数据，场景中就可以实时的变化呢？

答案是肯定的，这需要通过动态数据系统来完成。下面我们依然通过一个简单的案例来介绍如何使用动态数据。

假设我们有一个温控面板，面板上需要展示机器的实时温度，现在，我们就来一起实现这个功能。
## 准备面板
在基础模型中，我们提供了一个“2D面板”，在场景中拖入一个2D面板，双击它，镜头会自动拉近。在右侧属性面板中切换至内容选项卡，点击“文字列表”后的“+”按钮，2D面板中会自动添加一条文本，修改文本为“温度：”并将它移至合适的位置。再添加一条文本，将它移至“温度：”的右侧，修改文本为“0”，表示当前的温度。现在，一个静态的温控面板就展示好了。
## 添加动态数据
既然要绑定动态数据，我们首先需要定义一条动态数据。点击上方工具栏中的“数据”按钮，弹出动态数据编辑弹窗。在添加一条动态数据之前，我们先简单了解下动态数据的构成。

一条动态数据是由数据ID、名称、类型、值四个部分组成的。其中数据ID在场景中是唯一的，通过它来关联不同的属性，后台推送数据时也需要它来作为标识符。我们可以给动态数据设置比较好记的名称，方便在绑定时选择，如果不设置则默认显示ID。类型用来指定设置的值是字符串、数值还是布尔值（是/否），并且可以给动态数据设置一条初始值。

现在我们点击右侧的“+ 新增”按钮，在弹窗中输入数据ID为“temp”，点击确定，一条ID为“temp”的动态数据就添加了。修改它的名称为“温度”，类型为“数值”，值为“0”，关闭弹窗。
## 绑定动态数据
现在我们把动态数据“temp”与值为“0”的“文本”属性进行绑定。

鼠标移至“文本”属性上，我们会发现后面会出现一个类似回形针的“绑定”按钮。点击按钮，会出现动态数据列表选项框。点击选项“温度”，选项框会隐藏并且按钮会变为蓝色并常显，这代表属性已经与动态数据“temp”绑定起来了。
## 设置动态数据改变事件
想要改变动态数据的值有两种方法，现在先介绍第一种：通过执行“改变动态数据”事件来改变“temp”的值。切换到事件选项卡，选择并添加“鼠标单击后”事件，点击“+ 动作”按钮，在动作编辑弹窗中选择动作“改变动态数据”，选择并添加数据“温度”，这里我们选择“加”，值设置为“1”，这样每次点击2D面板都会让温度加1。设置完毕，点击确定，右侧会出现改变动态数据的相关描述。
## 执行事件
现在，我们已经把动态数据“temp”与2D面板文本绑定起来了，并且设置好了事件使“temp”在每次点击2D面板时加1。点击运行按钮，进入运行状态，然后我们点击一下2D面板，会发现文本由“0”变成了“1”，再次点击2D面板，文本会变成“2”，每次点击都会递增。这表明文本确实已经与动态数据实现关联，而动态数据的改变会同步更改文本值。

但是这仍非我们想要的结果，动态数据的改变应该是由后台推送的。现在我们就来介绍改变动态数据的第二种方法。
## 设置连接HTTP事件
后台推送数据需要用到网络请求，编辑器提供了三种连接方式：HTTP、MQTT和WebSocket。这里我们使用连接HTTP。点击场景空白位置或者按ESC取消选中2D面板，进入场景的属性编辑面板。右侧属性栏切换至事件选项卡，选择并添加“场景打开后”事件，点击“+ 动作”按钮，在动作编辑弹窗中选择动作“连接HTTP”，名称可以不填，地址输入“/api/device/data?mock=1”，这是我们的一个测试地址，它会返回一些数据点号以及随机值，类型默认为“get”，间隔设置为2秒。编辑完毕，点击确定，右侧出现连接HTTP的相关描述。

现在，如果我们运行项目，在这个场景打开后，会自动每2秒请求一次测试地址，正常情况下2D面板数据应该会显示后台产生的随机数。但是因为我们的数据ID“temp”并不在测试地址返回的数据点号集合范围内，因此实际上面板不会发生任何变化。所以，我们要把“temp”修改为测试地址中已有的点号。
## 修改数据ID
在编辑状态下点击顶部工具栏“数据”按钮，打开数据编辑弹窗，鼠标移至“temp”，后面会多出一个“编辑”图标。点击图标，打开修改数据ID弹窗，输入新ID“device-001”，点击确定，数据ID会更新，关闭弹窗，这样数据ID就修改完毕了。修改数据ID无需重新绑定属性，系统会自动处理新ID与对应的绑定属性的关系。
## 执行事件
我们再次进入运行状态，会发现数据已经发生了变化，并且每隔2秒更新一次。至此，我们的需求已经顺利实现。
## 结语
我们总结一下如何通过动态数据来改变视图：

1. 添加动态数据，其中数据ID是列表中唯一的。
2. 通过“绑定”按钮将属性与指定动态数据关联。
3. 设置事件，主动改变动态数据与后台推送两种方式均可。
4. 运行项目，当对应事件发生时，动态数据会发生变化，并且同步反馈到视图中。

通过动态数据，我们可以很容易的实现统计信息等数据的实时变化。关于动态数据的更多信息，您可以参阅文档[动态数据](https://www.yuque.com/u479944/afy6zg/ppf5so2xr52gi9le)。
