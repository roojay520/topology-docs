<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Core | 乐吾乐</title>
    <meta name="description" content="乐吾乐文档中心">
    <link rel="stylesheet" href="/assets/style.7ba49857.css">
    <link rel="modulepreload" href="/assets/chunks/AlgoliaSearchBox.39db79b5.js">
    <link rel="modulepreload" href="/assets/app.7a90af25.js">
    <link rel="modulepreload" href="/assets/api_core.md.012b49d1.lean.js">
    
    <meta name="twitter:title" content="Core | 乐吾乐">
  <meta property="og:title" content="Core | 乐吾乐">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="乐吾乐, back to home" data-v-675d8756 data-v-cc01ef16><img class="logo" src="/newlogo.jpg" alt="Logo" data-v-cc01ef16> 乐吾乐</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/tutorial/introduction" data-v-b8818f8c>2D教程 <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item active" href="/api/core" data-v-b8818f8c>Meta2D API <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/3d/editor/guide/introduction" data-v-b8818f8c>3D教程 <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/awesome/home" data-v-b8818f8c>资源 <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-dropdown-link" data-v-eab3edfe data-v-56bf3a3f><button class="button" data-v-56bf3a3f><span class="button-text" data-v-56bf3a3f>产品</span><span class="right button-arrow" data-v-56bf3a3f></span></button><ul class="dialog" data-v-56bf3a3f><!--[--><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item isExternal" href="https://2ds.le5le.com/" target="_blank" rel="noopener noreferrer" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>乐吾乐 2D可视化</span><span class="icon" data-v-bbc27490><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-bbc27490><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item isExternal" href="http://111.172.231.243:7800/" target="_blank" rel="noopener noreferrer" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>乐吾乐 3D 预览版</span><span class="icon" data-v-bbc27490><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-bbc27490><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item isExternal" href="http://iot.demo.le5le.com/" target="_blank" rel="noopener noreferrer" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>乐吾乐 物联平台</span><span class="icon" data-v-bbc27490><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-bbc27490><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/tutorial/commercial" data-v-b8818f8c>企业版 <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-dropdown-link" data-v-eab3edfe data-v-56bf3a3f><button class="button" data-v-56bf3a3f><span class="button-text" data-v-56bf3a3f>关于我们</span><span class="right button-arrow" data-v-56bf3a3f></span></button><ul class="dialog" data-v-56bf3a3f><!--[--><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/about/us" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>关于我们</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/about/join" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>加入我们</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-eab3edfe><div class="nav-dropdown-link" data-v-eab3edfe data-v-56bf3a3f><button class="button" data-v-56bf3a3f><span class="button-text" data-v-56bf3a3f>社区</span><span class="right button-arrow" data-v-56bf3a3f></span></button><ul class="dialog" data-v-56bf3a3f><!--[--><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item isExternal" href="https://github.com/le5le-com" target="_blank" rel="noopener noreferrer" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>Github</span><span class="icon" data-v-bbc27490><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-bbc27490><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item isExternal" href="https://gitee.com/le5le" target="_blank" rel="noopener noreferrer" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>Gitee</span><span class="icon" data-v-bbc27490><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-bbc27490><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/community/wechat" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>技术交流群</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/tutorial/faq" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>常见问题</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><!--]--></ul></div></div><!--]--><!----><!----></nav></div><!--[--><!--[--><div class="algolia-search-box" id="docsearch"></div><!--]--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/tutorial/introduction" data-v-b8818f8c>2D教程 <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item active" href="/api/core" data-v-b8818f8c>Meta2D API <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/3d/editor/guide/introduction" data-v-b8818f8c>3D教程 <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/awesome/home" data-v-b8818f8c>资源 <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-dropdown-link" data-v-eab3edfe data-v-56bf3a3f><button class="button" data-v-56bf3a3f><span class="button-text" data-v-56bf3a3f>产品</span><span class="right button-arrow" data-v-56bf3a3f></span></button><ul class="dialog" data-v-56bf3a3f><!--[--><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item isExternal" href="https://2ds.le5le.com/" target="_blank" rel="noopener noreferrer" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>乐吾乐 2D可视化</span><span class="icon" data-v-bbc27490><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-bbc27490><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item isExternal" href="http://111.172.231.243:7800/" target="_blank" rel="noopener noreferrer" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>乐吾乐 3D 预览版</span><span class="icon" data-v-bbc27490><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-bbc27490><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item isExternal" href="http://iot.demo.le5le.com/" target="_blank" rel="noopener noreferrer" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>乐吾乐 物联平台</span><span class="icon" data-v-bbc27490><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-bbc27490><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/tutorial/commercial" data-v-b8818f8c>企业版 <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-dropdown-link" data-v-eab3edfe data-v-56bf3a3f><button class="button" data-v-56bf3a3f><span class="button-text" data-v-56bf3a3f>关于我们</span><span class="right button-arrow" data-v-56bf3a3f></span></button><ul class="dialog" data-v-56bf3a3f><!--[--><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/about/us" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>关于我们</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/about/join" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>加入我们</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-eab3edfe><div class="nav-dropdown-link" data-v-eab3edfe data-v-56bf3a3f><button class="button" data-v-56bf3a3f><span class="button-text" data-v-56bf3a3f>社区</span><span class="right button-arrow" data-v-56bf3a3f></span></button><ul class="dialog" data-v-56bf3a3f><!--[--><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item isExternal" href="https://github.com/le5le-com" target="_blank" rel="noopener noreferrer" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>Github</span><span class="icon" data-v-bbc27490><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-bbc27490><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item isExternal" href="https://gitee.com/le5le" target="_blank" rel="noopener noreferrer" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>Gitee</span><span class="icon" data-v-bbc27490><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-bbc27490><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/community/wechat" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>技术交流群</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/tutorial/faq" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>常见问题</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><!--]--></ul></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><p class="sidebar-link-item">API</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item active" href="/api/core">Core</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#属性">属性</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#函数">函数</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#constructor">constructor</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#setoptions">setOptions</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#getoptions">getOptions</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#resize">resize</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#addpen">addPen</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#addpens">addPens</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#render">render</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#open">open</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#connectsocket">connectSocket</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#drawline">drawLine</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#finishdrawline">finishDrawLine</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#drawingpencil">drawingPencil</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#stoppencil">stopPencil</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#lock">lock</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#finishpencil">finishPencil</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#updatelinetype">updateLineType</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#adddrawlinefn">addDrawLineFn</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#removedrawlinefn">removeDrawLineFn</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#showmagnifier">showMagnifier</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#hidemagnifier">hideMagnifier</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#togglemagnifier">toggleMagnifier</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#clear">clear</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#emit">emit</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#on">on</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#off">off</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#register">register</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#registercanvasdraw">registerCanvasDraw</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#registeranchors">registerAnchors</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#registermovedock">registerMoveDock</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#registerresizedock">registerResizeDock</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#find">find</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#findone">findOne</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#getpenrect">getPenRect</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#setpenrect">setPenRect</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#startanimate">startAnimate</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#pauseanimate">pauseAnimate</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#stopanimate">stopAnimate</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#startvideo">startVideo</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#pausevideo">pauseVideo</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#stopvideo">stopVideo</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#calcanimateduration">calcAnimateDuration</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#combine">combine</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#uncombine">uncombine</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#active">active</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#inactive">inactive</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#delete">delete</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#scale">scale</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#translate">translate</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#translatepens">translatePens</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#getparent">getParent</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#data">data</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#copy">copy</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#cut">cut</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#paste">paste</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#undo">undo</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#redo">redo</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#connectwebsocket">connectWebsocket</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#closewebsocket">closeWebsocket</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#connectmqtt">connectMqtt</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#closemqtt">closeMqtt</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#setvalue">setValue</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#setvalue-1">_setValue</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#setdatas">setDatas</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#updatevalue">updateValue</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#pushhistory">pushHistory</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#showinput">showInput</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#hideinput">hideInput</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#cleardropdownlist">clearDropdownList</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#pushchildren">pushChildren</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#renderpenraw">renderPenRaw</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#topng">toPng</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#downloadpng">downloadPng</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#getrect">getRect</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#fitview">fitView</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#gotoview">gotoView</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#centerview">centerView</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#hasview">hasView</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#alignnodes">alignNodes</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#spacebetween">spaceBetween</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#spacebetweencolumn">spaceBetweenColumn</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#layout">layout</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#showmap">showMap</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#hidemap">hideMap</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#toggleanchormode">toggleAnchorMode</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#addanchorhand">addAnchorHand</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#removeanchorhand">removeAnchorHand</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#toggleanchorhand">toggleAnchorHand</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#top">top</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#bottom">bottom</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#up">up</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#down">down</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#setlayer">setLayer</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#changepenid">changePenId</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#getlines">getLines</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#nextnode">nextNode</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#previousnode">previousNode</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#tocomponent">toComponent</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#setvisible">setVisible</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#destroy">destroy</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#setbackgroundimage">setBackgroundImage</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#setbackgroundcolor">setBackgroundColor</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#setgrid">setGrid</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#setrule">setRule</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#getnext">getNext</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#addanchor">addAnchor</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#connectline">connectLine</a><!----></li></ul></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/api/canvas">Canvas</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/api/pen">Pen</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/api/rect">Rect</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/api/point">Point</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/api/layout">Layout</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/api/utils">Utils</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h1 id="core" tabindex="-1">Core <a class="header-anchor" href="#core" aria-hidden="true">#</a></h1><p>可视化引擎</p><h2 id="属性" tabindex="-1">属性 <a class="header-anchor" href="#属性" aria-hidden="true">#</a></h2><table><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>parent</td><td>HTMLElement</td><td>可视化引擎的父容器</td></tr><tr><td>options</td><td><a href="./../tutorial/meta2d.html#options-选项">Options</a></td><td>可视化引擎选项</td></tr><tr><td>canvas</td><td><a href="./canvas.html">Canvas</a></td><td>绘画画板</td></tr><tr><td>store</td><td><a href="./../tutorial/meta2d.html#meta2dstore">Meta2dStore</a></td><td>绘画数据。包括文件数据和各种状态数据等</td></tr><tr><td>websocket</td><td>WebSocket</td><td>原生 WebSocket 客户端。仅连接成功才有实例</td></tr><tr><td>mqttClient</td><td>Mqtt.Client</td><td>mqtt.js 通信客户端</td></tr><tr><td>beforeAddPen <strong>弃用</strong></td><td>(pen: Pen) =&gt; boolean</td><td>添加 Pen 前生命周期函数，返回 true 允许</td></tr><tr><td>beforeAddPens</td><td><code>(pens: Pen[]) =&gt; Promise&lt;boolean&gt;</code></td><td>添加 Pen[] 前生命周期函数，返回 true 允许</td></tr><tr><td>beforeRemovePens</td><td><code>(pens: Pen[]) =&gt; Promise&lt;boolean&gt;</code></td><td>移除 Pen[] 前生命周期函数，返回 true 允许</td></tr><tr><td>beforeAddAnchor</td><td><code>(pen: Pen, anchor: Point) =&gt; Promise&lt;boolean&gt;</code></td><td>添加 Anchor 前生命周期函数，返回 true 允许</td></tr><tr><td>beforeRemoveAnchor</td><td><code>(pen: Pen, anchor: Point) =&gt; Promise&lt;boolean&gt;</code></td><td>移除 Anchor 前生命周期函数，返回 true 允许</td></tr></tbody></table><h2 id="函数" tabindex="-1">函数 <a class="header-anchor" href="#函数" aria-hidden="true">#</a></h2><h3 id="constructor" tabindex="-1">constructor <a class="header-anchor" href="#constructor" aria-hidden="true">#</a></h3><p>构造函数，创建一个可视化引擎对象。</p><p><strong>参数：</strong></p><ul><li><p>parent ：string | HTMLElement<br> 可视化引擎的父容器 id 或 Element 元素</p></li><li><p>options ：<a href="./../tutorial/meta2d.html#options-选项">Options</a><br> 可视化引擎选项，可缺省</p></li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code><span class="token keyword">var</span> meta2d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Meta2d</span><span class="token punctuation">(</span><span class="token string">&#39;meta2d&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> meta2d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Meta2d</span><span class="token punctuation">(</span><span class="token string">&#39;meta2d&#39;</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> meta2d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Meta2d</span><span class="token punctuation">(</span>div<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="setoptions" tabindex="-1">setOptions <a class="header-anchor" href="#setoptions" aria-hidden="true">#</a></h3><p>设置引擎选项。</p><p><strong>参数：</strong></p><ul><li>options ：<a href="./../tutorial/meta2d.html#options-选项">Options</a><br> 可视化引擎选项</li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code><span class="token keyword">var</span> meta2d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Meta2d</span><span class="token punctuation">(</span><span class="token string">&#39;meta2d&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
meta2d<span class="token punctuation">.</span><span class="token function">setOptions</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="getoptions" tabindex="-1">getOptions <a class="header-anchor" href="#getoptions" aria-hidden="true">#</a></h3><p>获取引擎选项。</p><p><strong>参数：</strong><br> 无</p><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code><span class="token keyword">var</span> meta2d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Meta2d</span><span class="token punctuation">(</span><span class="token string">&#39;meta2d&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> options <span class="token operator">=</span> meta2d<span class="token punctuation">.</span><span class="token function">getOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="resize" tabindex="-1">resize <a class="header-anchor" href="#resize" aria-hidden="true">#</a></h3><p>重置可视化引擎大小</p><p><strong>参数：</strong></p><ul><li><p>width: number<br> 新的宽度。可缺省自适应</p></li><li><p>height: number<br> 新的高度。可缺省自适应</p></li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

meta2d<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="addpen" tabindex="-1">addPen <a class="header-anchor" href="#addpen" aria-hidden="true">#</a></h3><p>添加画笔 Pen 到画布</p><p><strong>参数：</strong></p><ul><li><p>pen: <a href="./pen.html">Pen</a><br> 画笔</p></li><li><p>history: boolean<br> 是否加入编辑历史记录（撤消重做）。缺省不加入历史</p></li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code><span class="token keyword">const</span> pen <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&#39;rectangle&#39;</span><span class="token punctuation">,</span>
  text<span class="token operator">:</span> <span class="token string">&#39;矩形&#39;</span><span class="token punctuation">,</span>
  x<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  y<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  width<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  height<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
meta2d<span class="token punctuation">.</span><span class="token function">addPen</span><span class="token punctuation">(</span>pen<span class="token punctuation">)</span><span class="token punctuation">;</span>

meta2d<span class="token punctuation">.</span><span class="token function">addPen</span><span class="token punctuation">(</span>pen<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="addpens" tabindex="-1">addPens <a class="header-anchor" href="#addpens" aria-hidden="true">#</a></h3><p>批量添加画笔 Pen 到画布</p><p><strong>参数：</strong></p><ul><li><p>pen: <a href="./pen.html">Pen</a>[]<br> 画笔数组</p></li><li><p>history: boolean<br> 是否加入编辑历史记录（撤消重做）。缺省不加入历史</p></li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code><span class="token keyword">const</span> pen <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&#39;rectangle&#39;</span><span class="token punctuation">,</span>
  text<span class="token operator">:</span> <span class="token string">&#39;矩形&#39;</span><span class="token punctuation">,</span>
  x<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  y<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  width<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  height<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> pen2 <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&#39;rectangle&#39;</span><span class="token punctuation">,</span>
  text<span class="token operator">:</span> <span class="token string">&#39;矩形2&#39;</span><span class="token punctuation">,</span>
  x<span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
  y<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  width<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  height<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

meta2d<span class="token punctuation">.</span><span class="token function">addPens</span><span class="token punctuation">(</span><span class="token punctuation">[</span>pen<span class="token punctuation">,</span> pen2<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

meta2d<span class="token punctuation">.</span><span class="token function">addPens</span><span class="token punctuation">(</span><span class="token punctuation">[</span>pen<span class="token punctuation">,</span> pen2<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="render" tabindex="-1">render <a class="header-anchor" href="#render" aria-hidden="true">#</a></h3><p>重绘。主要用于手动修改数据后，重绘显示最新画面。</p><p><strong>参数：</strong></p><ul><li><p>dirty: number | boolean<br> 时间的毫秒数 或 是否脏<br> 可为空 - 表示当前时间，下一个绘画周期重绘<br> true - 于空完全相同<br> false - 且 meta2d.canvas.dirty(新版本dirty重命名为patchFlags) 为 true 时，在下一个绘画周期重绘。常用在不确定是否需要重绘时使用，例如说本次修改数据可能需要重绘时，在可能的情况下将 (meta2d.canvas.dirty = true) ，再执行 meta2d.render(false) ，这样不会导致非重绘的情况也重绘。 number - 不推荐使用 number</p><p>主要用于避免一帧内，多次频繁调用 render 带来不必要的绘画开销</p></li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code><span class="token comment">// 多次频繁调用，有性能保护，且显示最新</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  meta2d<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 修改过数据，确认数据已经dirty</span>
meta2d<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="open" tabindex="-1">open <a class="header-anchor" href="#open" aria-hidden="true">#</a></h3><p>打开图纸。图纸指在线绘画的内容，可保存为 json 数据。</p><p><strong>参数：</strong></p><ul><li>data: <a href="./../tutorial/meta2d.html#文件数据">Meta2dData</a><br> json 图纸数据。可为空，表示打开新的空白文档</li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code><span class="token keyword">const</span> pen <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&#39;rectangle&#39;</span><span class="token punctuation">,</span>
  text<span class="token operator">:</span> <span class="token string">&#39;矩形&#39;</span><span class="token punctuation">,</span>
  x<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  y<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  width<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  height<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

meta2d<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">{</span> pens<span class="token operator">:</span> <span class="token punctuation">[</span>pen<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="connectsocket" tabindex="-1">connectSocket <a class="header-anchor" href="#connectsocket" aria-hidden="true">#</a></h3><p>消息通信重连（默认自动连接）。需要提前已经设置过连接配置。更多用法参考：<a href="./../tutorial/data.html">实时数据监听</a></p><p><strong>参数：</strong><br> 无</p><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span>store<span class="token punctuation">.</span>data<span class="token punctuation">.</span>websocket <span class="token operator">=</span> url<span class="token punctuation">;</span>

meta2d<span class="token punctuation">.</span><span class="token function">connectSocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="drawline" tabindex="-1">drawLine <a class="header-anchor" href="#drawline" aria-hidden="true">#</a></h3><p>开始钢笔绘画。Enter、Escape、鼠标右键完成绘画。</p><p><strong>参数：</strong></p><ul><li><p>lineName ：string<br> 线类型名称：内置 curve、polyline、line、mind 4 种。可<a href="./../tutorial/line-ai.html">自定义</a>扩展。</p><p>当 lineName 为空时，表示取消画线</p></li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code><span class="token comment">// 开始钢笔绘画</span>
meta2d<span class="token punctuation">.</span><span class="token function">drawLine</span><span class="token punctuation">(</span><span class="token string">&#39;curve&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 取消绘画</span>
meta2d<span class="token punctuation">.</span><span class="token function">drawLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="finishdrawline" tabindex="-1">finishDrawLine <a class="header-anchor" href="#finishdrawline" aria-hidden="true">#</a></h3><p>钢笔绘画完成</p><p><strong>参数：</strong></p><ul><li>end : boolean<br> 当前鼠标位置是否作为结束点。默认否。</li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code><span class="token comment">// 开始钢笔绘画</span>
meta2d<span class="token punctuation">.</span><span class="token function">drawLine</span><span class="token punctuation">(</span><span class="token string">&#39;curve&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 绘画完成</span>
meta2d<span class="token punctuation">.</span><span class="token function">finishDrawLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="drawingpencil" tabindex="-1">drawingPencil <a class="header-anchor" href="#drawingpencil" aria-hidden="true">#</a></h3><p>开始铅笔绘画。鼠标抬起完成绘画<br><strong>参数：</strong><br> 无</p><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">drawingPencil</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="stoppencil" tabindex="-1">stopPencil <a class="header-anchor" href="#stoppencil" aria-hidden="true">#</a></h3><p>停止铅笔绘画，鼠标恢复默认状态<br><strong>参数：</strong><br> 无</p><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">stopPencil</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="lock" tabindex="-1">lock <a class="header-anchor" href="#lock" aria-hidden="true">#</a></h3><p>更改画布锁定状态，并且关闭铅笔，钢笔<br><strong>参数：</strong><br> lock <a href="./../api/pen.html#locked">LockState</a></p><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="finishpencil" tabindex="-1">finishPencil <a class="header-anchor" href="#finishpencil" aria-hidden="true">#</a></h3><p>铅笔绘画完成</p><p><strong>参数：</strong><br> 无</p><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">drawingPencil</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 绘画完成</span>
meta2d<span class="token punctuation">.</span><span class="token function">finishPencil</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="updatelinetype" tabindex="-1">updateLineType <a class="header-anchor" href="#updatelinetype" aria-hidden="true">#</a></h3><p>修改连线类型。比如曲线变为直线</p><p><strong>参数：</strong></p><ul><li><p>pen: <a href="./pen.html">Pen</a><br> 当前连线</p></li><li><p>lineName : string<br> 线类型名称：内置 curve、polyline、line、mind 4 种。可<a href="./../tutorial/line-ai.html">自定义</a>扩展。</p></li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">updateLineType</span><span class="token punctuation">(</span>line<span class="token punctuation">,</span> <span class="token string">&#39;curve&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

meta2d<span class="token punctuation">.</span><span class="token function">updateLineType</span><span class="token punctuation">(</span>line<span class="token punctuation">,</span> <span class="token string">&#39;line&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="adddrawlinefn" tabindex="-1">addDrawLineFn <a class="header-anchor" href="#adddrawlinefn" aria-hidden="true">#</a></h3><p>扩展自定义连线类型。可参考：<a href="./../tutorial/line-ai.html">自定义连线算法</a></p><p><strong>参数：</strong></p><ul><li><p>fnName: string<br> 自定义的连线类型名称。</p></li><li><p>fn: (store: Meta2dStore, pen: Pen, mousedwon?: Point) =&gt; void<br> 自定义的连线锚点算法</p></li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong><a href="./../tutorial/line-ai.html">自定义连线算法</a></p><h3 id="removedrawlinefn" tabindex="-1">removeDrawLineFn <a class="header-anchor" href="#removedrawlinefn" aria-hidden="true">#</a></h3><p>移除连线类型。仅 shift 切换时，切换列表中移除。</p><p><strong>参数：</strong></p><ul><li>fnName: string<br> 连线类型名称。</li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">removeDrawLineFn</span><span class="token punctuation">(</span><span class="token string">&#39;polyline&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="showmagnifier" tabindex="-1">showMagnifier <a class="header-anchor" href="#showmagnifier" aria-hidden="true">#</a></h3><p>显示放大镜</p><p><strong>参数：</strong> 无</p><p><strong>返回：</strong> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">showMagnifier</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="hidemagnifier" tabindex="-1">hideMagnifier <a class="header-anchor" href="#hidemagnifier" aria-hidden="true">#</a></h3><p>隐藏放大镜</p><p><strong>参数：</strong> 无</p><p><strong>返回：</strong> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">hideMagnifier</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="togglemagnifier" tabindex="-1">toggleMagnifier <a class="header-anchor" href="#togglemagnifier" aria-hidden="true">#</a></h3><p>显示或隐藏放大镜</p><p><strong>参数：</strong> 无</p><p><strong>返回：</strong> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">toggleMagnifier</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="clear" tabindex="-1">clear <a class="header-anchor" href="#clear" aria-hidden="true">#</a></h3><p>清空画布资源。打开空白图纸用 open()</p><p><strong>参数：</strong><br> 无</p><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="emit" tabindex="-1">emit <a class="header-anchor" href="#emit" aria-hidden="true">#</a></h3><p>发送自定义消息。底层采用 mitt.js</p><p><strong>参数：</strong></p><ul><li><p>eventType: string | symbol<br> 消息名称</p></li><li><p>data : any<br> 消息数据</p></li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&#39;myMessage&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="on" tabindex="-1">on <a class="header-anchor" href="#on" aria-hidden="true">#</a></h3><p>订阅消息</p><p><strong>参数：</strong></p><ul><li><p>eventType: string | symbol<br> 消息名称</p></li><li><p>handler : (event, data) =&gt; {}<br> 消息处理函数</p></li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code><span class="token keyword">const</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
meta2d<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;event&#39;</span><span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 不用时，又不销毁meta2d实例，记得取消订阅。</span>
</code></pre></div><h3 id="off" tabindex="-1">off <a class="header-anchor" href="#off" aria-hidden="true">#</a></h3><p>取消订阅消息</p><p><strong>参数：</strong></p><ul><li><p>eventType: string | symbol<br> 消息名称</p></li><li><p>handler : (event, data) =&gt; {}<br> 消息处理函数</p></li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code><span class="token keyword">const</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 订阅</span>
meta2d<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;event&#39;</span><span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 取消订阅</span>
meta2d<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">&#39;event&#39;</span><span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="register" tabindex="-1">register <a class="header-anchor" href="#register" aria-hidden="true">#</a></h3><p>注册自定义图形，用 Path2D 绘画</p><p><strong>参数：</strong></p><ul><li>obj : Object<br> 由&lt;图形名称: 图形绘画函数&gt;组成的 json 对象</li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><p>参考：<a href="./../tutorial/make-component.html">自定义图形库</a></p><h3 id="registercanvasdraw" tabindex="-1">registerCanvasDraw <a class="header-anchor" href="#registercanvasdraw" aria-hidden="true">#</a></h3><p>注册自定义图形，用 CanvasRenderingContext2D 绘画</p><p><strong>参数：</strong></p><ul><li>obj : Object<br> 由&lt;图形名称: 图形绘画函数&gt;组成的 json 对象</li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><p>参考：<a href="./../tutorial/make-component.html">自定义图形库</a></p><h3 id="registeranchors" tabindex="-1">registerAnchors <a class="header-anchor" href="#registeranchors" aria-hidden="true">#</a></h3><p>注册自定义图形锚点</p><p><strong>参数：</strong></p><ul><li>obj : Object<br> 由&lt;图形名称: 图形锚点函数&gt;组成的 json 对象</li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><p>参考：<a href="./../tutorial/make-component.html">自定义图形库</a></p><h3 id="registermovedock" tabindex="-1">registerMoveDock <a class="header-anchor" href="#registermovedock" aria-hidden="true">#</a></h3><p>注册移动辅助线算法</p><p><strong>参数：</strong></p><ul><li><p>store: <a href="./../tutorial/meta2d.html#meta2dstore">Meta2dStore</a><br> 引擎数据存储对象</p></li><li><p>rect: <a href="./rect.html">Rect</a><br> 拖拽区域</p></li><li><p>pens: <a href="./pen.html">Pen</a>[]<br> 本次拖拽的画笔们</p></li><li><p>offset: <a href="./point.html">Point</a><br> 本次偏移量，即画笔们的 worldRect + offset 得到的即 rect</p></li></ul><p><strong>返回：</strong><br> json 对象，包含：xDock, yDock</p><ul><li><p>xDock ： x, y, step, prev, penId<br> 水平方向的参考线</p></li><li><p>yDock ： x, y, step, prev, penId<br> 垂直方向的参考线</p><p>prev - 参考线的起点<br> x,y - 参考线的终点<br> step - 自动吸附需要的偏移量，比如 xDock.step=5，表示 rect.x += 5 是最终希望的位置。<br> penId - 自动吸附的画笔，对应画笔产生变化</p></li></ul><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">registerMoveDock</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">store<span class="token punctuation">,</span> rect<span class="token punctuation">,</span> pens<span class="token punctuation">,</span> offset</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    xDock<span class="token operator">:</span> <span class="token punctuation">{</span>
      x<span class="token punctuation">,</span>
      y<span class="token punctuation">,</span>
      prev<span class="token punctuation">,</span>
      step<span class="token punctuation">,</span>
      penId
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    yDock<span class="token operator">:</span> <span class="token punctuation">{</span>
      x<span class="token punctuation">,</span>
      y<span class="token punctuation">,</span>
      prev<span class="token punctuation">,</span>
      step<span class="token punctuation">,</span>
      penId
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="registerresizedock" tabindex="-1">registerResizeDock <a class="header-anchor" href="#registerresizedock" aria-hidden="true">#</a></h3><p>注册修改大小辅助线算法</p><p><strong>参数：</strong></p><ul><li><p>store: <a href="./../tutorial/meta2d.html#meta2dstore">Meta2dStore</a><br> 引擎数据存储对象</p></li><li><p>rect: <a href="./rect.html">Rect</a><br> 拖拽区域</p></li><li><p>pens: <a href="./pen.html">Pen</a>[]<br> 本次拖拽的画笔们</p></li><li><p>resizeIndex: number 本次 resize 拖动是哪个点，左上，右上，右下等（可打印查看）</p></li></ul><p><strong>返回：</strong><br> json 对象，包含：xDock, yDock</p><ul><li><p>xDock ： x, y, step, prev, penId<br> 水平方向的参考线</p></li><li><p>yDock ： x, y, step, prev, penId<br> 垂直方向的参考线</p><p>prev - 参考线的起点<br> x,y - 参考线的终点<br> step - 自动吸附需要的偏移量，比如 xDock.step=5，表示 rect.x += 5 是最终希望的位置。<br> penId - 自动吸附的画笔，对应画笔产生变化</p></li></ul><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">registerResizeDock</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">store<span class="token punctuation">,</span> rect<span class="token punctuation">,</span> pens<span class="token punctuation">,</span> resizeIndex</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    xDock<span class="token operator">:</span> <span class="token punctuation">{</span>
      x<span class="token punctuation">,</span>
      y<span class="token punctuation">,</span>
      prev<span class="token punctuation">,</span>
      step<span class="token punctuation">,</span>
      penId
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    yDock<span class="token operator">:</span> <span class="token punctuation">{</span>
      x<span class="token punctuation">,</span>
      y<span class="token punctuation">,</span>
      prev<span class="token punctuation">,</span>
      step<span class="token punctuation">,</span>
      penId
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="find" tabindex="-1">find <a class="header-anchor" href="#find" aria-hidden="true">#</a></h3><p>根据 id 或 tag 查找画笔</p><p><strong>参数：</strong></p><ul><li>idOrTag: string<br> id 或 tag</li></ul><p><strong>返回：</strong><br> 符合结果的 pen 数组</p><p><strong>示例：</strong></p><div class="language-js"><pre><code><span class="token keyword">var</span> pens <span class="token operator">=</span> meta2d<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">&#39;aaa&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="findone" tabindex="-1">findOne <a class="header-anchor" href="#findone" aria-hidden="true">#</a></h3><p>根据 id 或 tag 查找画笔，使用 Array.find ，找到一个即返回，找不到 undefined</p><p><strong>参数：</strong></p><ul><li>idOrTag: string<br> id 或 tag</li></ul><p><strong>返回：</strong><br> 符合结果的 pen 对象</p><p><strong>示例：</strong></p><div class="language-js"><pre><code><span class="token keyword">const</span> pen <span class="token operator">=</span> meta2d<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="getpenrect" tabindex="-1">getPenRect <a class="header-anchor" href="#getpenrect" aria-hidden="true">#</a></h3><p>获取 Pen 相对标尺原点的坐标区域</p><p><strong>参数：</strong></p><ul><li>pen: <a href="./pen.html">Pen</a><br> 画笔对象</li></ul><p><strong>返回：</strong><br><a href="./rect.html">Rect</a></p><p><strong>示例：</strong></p><div class="language-js"><pre><code><span class="token keyword">var</span> rect <span class="token operator">=</span> meta2d<span class="token punctuation">.</span><span class="token function">getPenRect</span><span class="token punctuation">(</span>pen<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="setpenrect" tabindex="-1">setPenRect <a class="header-anchor" href="#setpenrect" aria-hidden="true">#</a></h3><p>设置 Pen 相对标尺原点的坐标区域</p><p><strong>参数：</strong></p><ul><li><p>pen: <a href="./pen.html">Pen</a><br> 画笔</p></li><li><p>rect: <a href="./rect.html">Rect</a> 区域</p></li><li><p>render : boolean<br> 是否立刻重绘。默认是</p></li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">setPenRect</span><span class="token punctuation">(</span>pen<span class="token punctuation">,</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> width<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> height<span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="startanimate" tabindex="-1">startAnimate <a class="header-anchor" href="#startanimate" aria-hidden="true">#</a></h3><p>开始播放动画</p><p><strong>参数：</strong></p><ul><li>idOrTagOrPens : string | Pen[]<br> id，或 tags，或 Pen[]对象数组</li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">startAnimate</span><span class="token punctuation">(</span><span class="token string">&#39;aaa&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

meta2d<span class="token punctuation">.</span><span class="token function">startAnimate</span><span class="token punctuation">(</span><span class="token punctuation">[</span>pen<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="pauseanimate" tabindex="-1">pauseAnimate <a class="header-anchor" href="#pauseanimate" aria-hidden="true">#</a></h3><p>暂停播放动画</p><p><strong>参数：</strong></p><ul><li>idOrTagOrPens : string | Pen[]<br> id，或 tags，或 Pen[]对象数组</li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">pauseAnimate</span><span class="token punctuation">(</span><span class="token string">&#39;aaa&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

meta2d<span class="token punctuation">.</span><span class="token function">pauseAnimate</span><span class="token punctuation">(</span><span class="token punctuation">[</span>pen<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="stopanimate" tabindex="-1">stopAnimate <a class="header-anchor" href="#stopanimate" aria-hidden="true">#</a></h3><p>停止播放动画</p><p><strong>参数：</strong></p><ul><li>idOrTagOrPens : string | Pen[]<br> id，或 tags，或 Pen[]对象数组</li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">stopAnimate</span><span class="token punctuation">(</span><span class="token string">&#39;aaa&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

meta2d<span class="token punctuation">.</span><span class="token function">stopAnimate</span><span class="token punctuation">(</span><span class="token punctuation">[</span>pen<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="startvideo" tabindex="-1">startVideo <a class="header-anchor" href="#startvideo" aria-hidden="true">#</a></h3><p>开始播放视频</p><p><strong>参数：</strong></p><ul><li>idOrTagOrPens : string | Pen[]<br> id，或 tags，或 Pen[]对象数组</li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">startVideo</span><span class="token punctuation">(</span><span class="token string">&#39;aaa&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

meta2d<span class="token punctuation">.</span><span class="token function">startVideo</span><span class="token punctuation">(</span><span class="token punctuation">[</span>pen<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="pausevideo" tabindex="-1">pauseVideo <a class="header-anchor" href="#pausevideo" aria-hidden="true">#</a></h3><p>暂停播放视频</p><p><strong>参数：</strong></p><ul><li>idOrTagOrPens : string | Pen[]<br> id，或 tags，或 Pen[]对象数组</li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">pauseVideo</span><span class="token punctuation">(</span><span class="token string">&#39;aaa&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

meta2d<span class="token punctuation">.</span><span class="token function">pauseVideo</span><span class="token punctuation">(</span><span class="token punctuation">[</span>pen<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="stopvideo" tabindex="-1">stopVideo <a class="header-anchor" href="#stopvideo" aria-hidden="true">#</a></h3><p>停止播放视频</p><p><strong>参数：</strong></p><ul><li>idOrTagOrPens : string | Pen[]<br> id，或 tags，或 Pen[]对象数组</li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">stopVideo</span><span class="token punctuation">(</span><span class="token string">&#39;aaa&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

meta2d<span class="token punctuation">.</span><span class="token function">stopVideo</span><span class="token punctuation">(</span><span class="token punctuation">[</span>pen<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="calcanimateduration" tabindex="-1">calcAnimateDuration <a class="header-anchor" href="#calcanimateduration" aria-hidden="true">#</a></h3><p>计算动画帧时长</p><p><strong>参数：</strong></p><ul><li>pen: <a href="./pen.html">Pen</a><br> 画笔</li></ul><p><strong>返回：</strong> number 动画帧时长</p><p><strong>示例：</strong></p><div class="language-js"><pre><code><span class="token keyword">const</span> duration <span class="token operator">=</span> meta2d<span class="token punctuation">.</span><span class="token function">calcAnimateDuration</span><span class="token punctuation">(</span>pen<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="combine" tabindex="-1">combine <a class="header-anchor" href="#combine" aria-hidden="true">#</a></h3><p>组合画笔</p><p><strong>参数：</strong></p><ul><li><p>pens: Pen[]<br> 画笔数组</p></li><li><p>showChild: number</p><p>可选参数，默认无需传递。 若组合为 <a href="./../tutorial/data.html#状态">状态</a> ，需传递该参数，默认展示第一个即传 0 ，第二个 1。</p></li></ul><p><strong>返回：</strong><br> void。新画笔为 meta2d.store.active[0]</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">combine</span><span class="token punctuation">(</span>pens<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 组合为状态</span>
meta2d<span class="token punctuation">.</span><span class="token function">combine</span><span class="token punctuation">(</span>pens<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="uncombine" tabindex="-1">uncombine <a class="header-anchor" href="#uncombine" aria-hidden="true">#</a></h3><p>取消组合画笔</p><p><strong>参数：</strong></p><ul><li>pen: <a href="./pen.html">Pen</a><br> 画笔</li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">uncombine</span><span class="token punctuation">(</span>pen<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="active" tabindex="-1">active <a class="header-anchor" href="#active" aria-hidden="true">#</a></h3><p>选中高亮画笔</p><p><strong>参数：</strong></p><ul><li>pens: Pen[]<br> 画笔数组</li></ul><p><strong>返回：</strong><br> void。高亮画笔为 meta2d.store.active</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">active</span><span class="token punctuation">(</span>pens<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="inactive" tabindex="-1">inactive <a class="header-anchor" href="#inactive" aria-hidden="true">#</a></h3><p>清空高亮画笔</p><p><strong>参数：</strong><br> 无</p><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">inactive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="delete" tabindex="-1">delete <a class="header-anchor" href="#delete" aria-hidden="true">#</a></h3><p>删除画笔</p><p><strong>参数：</strong></p><ul><li>pens: Pen[]<br> 画笔数组</li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>pens<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="scale" tabindex="-1">scale <a class="header-anchor" href="#scale" aria-hidden="true">#</a></h3><p>缩放画布</p><p><strong>参数：</strong></p><ul><li><p>scale: number<br> 缩放比例。1 表示 100%</p></li><li><p>center : Point<br> 缩放中心点。默认左上角 0 的位置</p></li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code><span class="token comment">// 缩放到120%</span>
meta2d<span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">1.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="translate" tabindex="-1">translate <a class="header-anchor" href="#translate" aria-hidden="true">#</a></h3><p>平移画布</p><p><strong>参数：</strong></p><ul><li><p>x: number<br> 水平偏移量</p></li><li><p>y: number<br> 垂直偏移量</p></li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="translatepens" tabindex="-1">translatePens <a class="header-anchor" href="#translatepens" aria-hidden="true">#</a></h3><p>平移画笔</p><p><strong>参数：</strong></p><ul><li><p>pens : Pen[]<br> 画笔数组</p></li><li><p>x: number<br> 水平偏移量</p></li><li><p>y: number<br> 垂直偏移量</p></li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">translatePens</span><span class="token punctuation">(</span><span class="token punctuation">[</span>pen<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="getparent" tabindex="-1">getParent <a class="header-anchor" href="#getparent" aria-hidden="true">#</a></h3><p>获取父画笔</p><p><strong>参数：</strong></p><ul><li><p>pen: <a href="./pen.html">Pen</a><br> 画笔</p></li><li><p>root : boolean<br> 是否获取根祖父画笔。默认否，直接父画笔</p></li></ul><p><strong>返回：</strong><br> Pen</p><p><strong>示例：</strong></p><div class="language-js"><pre><code><span class="token comment">// 获取父画笔</span>
meta2d<span class="token punctuation">.</span><span class="token function">getParent</span><span class="token punctuation">(</span>pen<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 获取根祖父画笔</span>
meta2d<span class="token punctuation">.</span><span class="token function">getParent</span><span class="token punctuation">(</span>pen<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="data" tabindex="-1">data <a class="header-anchor" href="#data" aria-hidden="true">#</a></h3><p>获取文件保存数据。<br> 与画布数据失去关联关系，即修改该值不影响画布数据。<br> 若要修改后影响画布数据，请使用 meta2d.store.data</p><p><strong>参数：</strong><br> 无</p><p><strong>返回：</strong><br> json 数据</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="copy" tabindex="-1">copy <a class="header-anchor" href="#copy" aria-hidden="true">#</a></h3><p>复制画笔</p><p><strong>参数：</strong></p><ul><li>pens: Pen[]<br> 画笔数组。如果为空，表示复制选中画笔</li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

meta2d<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span><span class="token punctuation">[</span>pen<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="cut" tabindex="-1">cut <a class="header-anchor" href="#cut" aria-hidden="true">#</a></h3><p>剪切画笔</p><p><strong>参数：</strong></p><ul><li>pens: Pen[]<br> 画笔数组。如果为空，表示剪切选中画笔</li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">cut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

meta2d<span class="token punctuation">.</span><span class="token function">cut</span><span class="token punctuation">(</span><span class="token punctuation">[</span>pen<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="paste" tabindex="-1">paste <a class="header-anchor" href="#paste" aria-hidden="true">#</a></h3><p>粘贴画笔</p><p><strong>参数：</strong></p><p>空</p><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">paste</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="undo" tabindex="-1">undo <a class="header-anchor" href="#undo" aria-hidden="true">#</a></h3><p>撤消</p><p><strong>参数：</strong></p><p>空</p><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">undo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="redo" tabindex="-1">redo <a class="header-anchor" href="#redo" aria-hidden="true">#</a></h3><p>重做</p><p><strong>参数：</strong></p><p>空</p><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">redo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="connectwebsocket" tabindex="-1">connectWebsocket <a class="header-anchor" href="#connectwebsocket" aria-hidden="true">#</a></h3><p>连接 websocket。</p><p><strong>参数：</strong></p><ul><li>websocket : string<br> websocket url 地址。如果为空，重连老的地址；否则，更新新地址并连接</li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code><span class="token comment">// 重连</span>
meta2d<span class="token punctuation">.</span><span class="token function">connectWebsocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 连接新url</span>
meta2d<span class="token punctuation">.</span><span class="token function">connectWebsocket</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="closewebsocket" tabindex="-1">closeWebsocket <a class="header-anchor" href="#closewebsocket" aria-hidden="true">#</a></h3><p>关闭 websocket 连接</p><p><strong>参数：</strong><br> 无</p><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">closeWebsocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="connectmqtt" tabindex="-1">connectMqtt <a class="header-anchor" href="#connectmqtt" aria-hidden="true">#</a></h3><p>连接 mqtt。底层采用 mqtt.js。</p><p><strong>参数：</strong></p><ul><li>params : mqtt 配置参数</li></ul><div class="language-js"><pre><code><span class="token punctuation">{</span>
  mqtt<span class="token operator">:</span> string<span class="token punctuation">;</span>  <span class="token comment">// url</span>
  mqttTopics<span class="token operator">:</span> string<span class="token punctuation">;</span> <span class="token comment">// 多个topic用,分隔</span>
  mqttOptions<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    clientId<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
    username<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
    password<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
    customClientId<span class="token operator">?</span><span class="token operator">:</span> boolean<span class="token punctuation">;</span>  <span class="token comment">// ture - clientId不变；false - clientId随机，避免相同连接clientId冲突</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code><span class="token comment">// 重连</span>
meta2d<span class="token punctuation">.</span><span class="token function">connectMqtt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 连接新配置</span>
meta2d<span class="token punctuation">.</span><span class="token function">connectMqtt</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="closemqtt" tabindex="-1">closeMqtt <a class="header-anchor" href="#closemqtt" aria-hidden="true">#</a></h3><p>关闭 mqtt 连接</p><p><strong>参数：</strong><br> 无</p><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">closeMqtt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="setvalue" tabindex="-1">setValue <a class="header-anchor" href="#setvalue" aria-hidden="true">#</a></h3><p>修改 <a href="./pen.html">Pen</a> 属性值, 触发对应画笔们的值变化事件。（若想要不触发值变化事件使用 _setValue） 1.1.15 版本以后，如果如果存在data.id并且id等于画布id(<a href="http://meta2d.store.data.id" target="_blank" rel="noopener noreferrer">meta2d.store.data.id</a>),则表示修改画布的options属性。</p><p><strong>参数：</strong></p><ul><li>data: any<br> 更新的数据。其中，需要有 id 或 tag，定位查找需要修改的 pen<br> 新版本以后，新增dataId 方式修改绑定变量的值,详见下方示例。 新版本以后，当data.id为图纸id(<a href="http://meta2d.store.data.id" target="_blank" rel="noopener noreferrer">meta2d.store.data.id</a>)的时候,该方法表示修改meta2d.store.data属性</li><li>{ render: boolean = true, history: boolean = true, doEvent: boolean = false}<br> 命名参数，参照下方示例 <ol><li>render:更改数据后是否重新渲染画布<br> 默认会重新渲染，但若在 for 循环中使用 setValue 可能带来性能问题，推荐将值设置成 false ，当 for 循环执行完毕后，使用 meta2d.render()</li><li>history:是否将值变化添加到历史记录</li><li>doEvent:值变化是否触发画笔事件执行</li></ol></li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code><span class="token comment">// 修改id为aaa的画笔的text属性</span>
meta2d<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">&#39;aaa&#39;</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">&#39;new text&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 修改tag为aaa的画笔的text属性</span>
meta2d<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token punctuation">{</span> tag<span class="token operator">:</span> <span class="token string">&#39;aaa&#39;</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">&#39;new text&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 查找id = pen.id的画笔，修改id为111</span>
meta2d<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> pen<span class="token punctuation">.</span>id<span class="token punctuation">,</span> newId<span class="token operator">:</span> <span class="token string">&#39;111&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// for 循环设置 pens 的 text</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> pen <span class="token keyword">of</span> pens<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  meta2d<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> pen<span class="token punctuation">.</span>id<span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">&#39;new text&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> render<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
meta2d<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/*
1.2.5 版本及以后
1.属性绑定变量
2.meta2d.initBindDatas(); 
*/</span>
meta2d<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>dataId<span class="token operator">:</span><span class="token string">&#39;d-1-a-001&#39;</span><span class="token punctuation">,</span>value<span class="token operator">:</span><span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="setvalue-1" tabindex="-1">_setValue <a class="header-anchor" href="#setvalue-1" aria-hidden="true">#</a></h3><p>同 setValue ，不同在于 不触发对应画笔们的值变化事件。 并且 _setValue 不会执行 render() 方法。 注意：1.2.2版本后，该方法将不再被使用。</p><h3 id="setdatas" tabindex="-1">setDatas <a class="header-anchor" href="#setdatas" aria-hidden="true">#</a></h3><p>1.2.5 版本及以后,通过dataId的方式（绑定变量），修改 <a href="./pen.html">Pen</a> 属性值</p><p><strong>参数：</strong></p><ul><li><p>datas: { dataId: string; value: any }[]<br> dataId 绑定的变量 value 更新的数据</p></li><li><p>{ render: boolean, history: boolean , doEvent: boolean}<br> 使用方式同setValue</p></li></ul><p><strong>示例：</strong></p><div class="language-js"><pre><code>
<span class="token comment">/*
1.2.5 版本及以后
1.属性绑定变量
2.meta2d.initBindDatas(); 
*/</span>
meta2d<span class="token punctuation">.</span><span class="token function">setDatas</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span>dataId<span class="token operator">:</span><span class="token string">&#39;d-1-a-001&#39;</span><span class="token punctuation">,</span>value<span class="token operator">:</span><span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="updatevalue" tabindex="-1">updateValue <a class="header-anchor" href="#updatevalue" aria-hidden="true">#</a></h3><p>修改 <a href="./pen.html">Pen</a> 属性值<br> 该方法不调用 render 方法，需要手动调用 render<br> 推荐使用 setValue</p><p><strong>参数：</strong></p><ul><li><p>pen: Pen<br> 需要更新的画笔</p></li><li><p>data: any<br> 更新的数据</p></li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code><span class="token keyword">const</span> pen <span class="token operator">=</span> meta2d<span class="token punctuation">.</span>store<span class="token punctuation">.</span>data<span class="token punctuation">.</span>pen<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

meta2d<span class="token punctuation">.</span><span class="token function">updateValue</span><span class="token punctuation">(</span>pen<span class="token punctuation">,</span> <span class="token punctuation">{</span>background<span class="token operator">:</span> <span class="token string">&#39;#f40&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="pushhistory" tabindex="-1">pushHistory <a class="header-anchor" href="#pushhistory" aria-hidden="true">#</a></h3><p>添加一个编辑历史到队列</p><p><strong>参数：</strong></p><ul><li><p>action: EditAction<br> 历史行为数据</p><div class="language-js"><pre><code><span class="token keyword">enum</span> EditType <span class="token punctuation">{</span>
  Add<span class="token punctuation">,</span>
  Update<span class="token punctuation">,</span>
  Delete<span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">EditAction</span> <span class="token punctuation">{</span>
  type<span class="token operator">?</span><span class="token operator">:</span> EditType<span class="token punctuation">;</span>
  initPens<span class="token operator">?</span><span class="token operator">:</span> Pen<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// 更新前的数据</span>
  pens<span class="token operator">?</span><span class="token operator">:</span> Pen<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>      <span class="token comment">// 更新后的数据</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">pushHistory</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> EditType<span class="token punctuation">.</span>Add<span class="token punctuation">,</span> pens<span class="token operator">:</span> <span class="token punctuation">[</span>pen<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

meta2d<span class="token punctuation">.</span><span class="token function">pushHistory</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  type<span class="token operator">:</span> EditType<span class="token punctuation">.</span>Update<span class="token punctuation">,</span>
  pens<span class="token operator">:</span> currentPens<span class="token punctuation">,</span>
  initPens<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

meta2d<span class="token punctuation">.</span><span class="token function">pushHistory</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> EditType<span class="token punctuation">.</span>Delete<span class="token punctuation">,</span> pens <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="showinput" tabindex="-1">showInput <a class="header-anchor" href="#showinput" aria-hidden="true">#</a></h3><p>显示输入框</p><p><strong>参数：</strong></p><ul><li>pen: <a href="./pen.html">Pen</a><br> 画笔</li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">showInput</span><span class="token punctuation">(</span>pen<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="hideinput" tabindex="-1">hideInput <a class="header-anchor" href="#hideinput" aria-hidden="true">#</a></h3><p>隐藏输入框</p><p><strong>参数：</strong></p><ul><li>pen: <a href="./pen.html">Pen</a><br> 画笔</li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">hideInput</span><span class="token punctuation">(</span>pen<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="cleardropdownlist" tabindex="-1">clearDropdownList <a class="header-anchor" href="#cleardropdownlist" aria-hidden="true">#</a></h3><p>移除画布下拉列表 HTML Element</p><p>当设置 pen.dropdownList=[{text,...}]属性，pen 可以作为下拉框使用，并生成画布下拉列表 HTML Element 对象。选中下拉列表选项后，会触发 pen.setValue({id:pen.id,text,...})行为。</p><p><strong>参数：</strong><br> 无</p><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">clearDropdownList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="pushchildren" tabindex="-1">pushChildren <a class="header-anchor" href="#pushchildren" aria-hidden="true">#</a></h3><p>给画笔添加子对象</p><p><strong>参数：</strong></p><ul><li><p>parent: <a href="./pen.html">Pen</a><br> 父画笔</p></li><li><p>children: Pen[]<br> 子元素</p></li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">pushChildren</span><span class="token punctuation">(</span>pen<span class="token punctuation">,</span> <span class="token punctuation">[</span>child<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="renderpenraw" tabindex="-1">renderPenRaw <a class="header-anchor" href="#renderpenraw" aria-hidden="true">#</a></h3><p>使用 CanvasRenderingContext2D 绘画 Pen。主要用于在第三方 canvas 中绘画</p><p><strong>参数：</strong></p><ul><li><p>ctx: CanvasRenderingContext2D CanvasRenderingContext2D</p></li><li><p>pen: <a href="./pen.html">Pen</a> 画笔</p></li><li><p>rect: <a href="./rect.html">Rect</a> 区域。默认 pen 自身区域</p></li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">pushChildren</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> pen<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="topng" tabindex="-1">toPng <a class="header-anchor" href="#topng" aria-hidden="true">#</a></h3><p>生成 png 图像</p><p><strong>参数：</strong></p><ul><li><p>padding: Padding(number)<br> 图片留白边距。默认 0</p></li><li><p>callback: (blob: Blob ) =&gt; void 回调函数。默认不传，返回给当前函数的返回值；否则返回给回调函数的 blob 参数</p></li></ul><p><strong>返回：</strong><br> 当 callback 为空时，返回 blob。</p><p><strong>示例：</strong></p><div class="language-js"><pre><code><span class="token keyword">var</span> blob <span class="token operator">=</span> meta2d<span class="token punctuation">.</span><span class="token function">toPng</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="downloadpng" tabindex="-1">downloadPng <a class="header-anchor" href="#downloadpng" aria-hidden="true">#</a></h3><p>下载为 png 文件</p><p><strong>参数：</strong></p><ul><li><p>name: string<br> 文件名</p></li><li><p>padding: Padding(number)<br> 图片留白边距。默认 0</p></li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">downloadPng</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="getrect" tabindex="-1">getRect <a class="header-anchor" href="#getrect" aria-hidden="true">#</a></h3><p>获取图纸区域</p><p><strong>参数：</strong></p><ul><li>pens: Pen[]<br> 画笔数组。默认为空，表示整个图纸</li></ul><p><strong>返回：</strong><br><a href="./rect.html">Rect</a></p><p><strong>示例：</strong></p><div class="language-js"><pre><code><span class="token keyword">var</span> rect <span class="token operator">=</span> meta2d<span class="token punctuation">.</span><span class="token function">getRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="fitview" tabindex="-1">fitView <a class="header-anchor" href="#fitview" aria-hidden="true">#</a></h3><p>自适应屏幕显示。会缩放画布到合适尺寸</p><p><strong>参数：</strong></p><ul><li><p>fit: boolean<br> true，完整展示整个图纸；false，短边展示图纸，长边会被截取显示不完整</p></li><li><p>viewPadding: Padding（number）<br> 图片留白边距。默认 10</p></li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">fitView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

meta2d<span class="token punctuation">.</span><span class="token function">fitView</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="gotoview" tabindex="-1">gotoView <a class="header-anchor" href="#gotoview" aria-hidden="true">#</a></h3><p>定位画笔到屏幕中心显示</p><p><strong>参数：</strong></p><ul><li>pen: <a href="./pen.html">Pen</a><br> 定位的画笔</li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">gotoView</span><span class="token punctuation">(</span>pen<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="centerview" tabindex="-1">centerView <a class="header-anchor" href="#centerview" aria-hidden="true">#</a></h3><p>居中显示可视区域。不缩放</p><p><strong>参数：</strong><br> 无</p><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">centerView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="hasview" tabindex="-1">hasView <a class="header-anchor" href="#hasview" aria-hidden="true">#</a></h3><p>是否存在画笔对象</p><p><strong>参数：</strong><br> 无</p><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code><span class="token keyword">var</span> hasPens <span class="token operator">=</span> meta2d<span class="token punctuation">.</span><span class="token function">hasView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="alignnodes" tabindex="-1">alignNodes <a class="header-anchor" href="#alignnodes" aria-hidden="true">#</a></h3><p>节点对齐</p><p><strong>参数：</strong></p><ul><li><p>align: string<br> 对齐方式: left, right, top, bottom, center, middle</p></li><li><p>pens: Pen[]<br> 画笔数组。默认为整个图纸</p></li><li><p>rect: Rect<br> 对齐区域。默认当前 pens 占据区域</p></li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">alignNodes</span><span class="token punctuation">(</span><span class="token string">&#39;left&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

meta2d<span class="token punctuation">.</span><span class="token function">alignNodes</span><span class="token punctuation">(</span><span class="token string">&#39;left&#39;</span><span class="token punctuation">,</span> pens<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="spacebetween" tabindex="-1">spaceBetween <a class="header-anchor" href="#spacebetween" aria-hidden="true">#</a></h3><p>水平等分对齐</p><p><strong>参数：</strong></p><ul><li><p>pens: Pen[]<br> 画笔数组。默认为整个图纸</p></li><li><p>width: number<br> 宽度。默认当前 pens 占据区域</p></li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">spaceBetween</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

meta2d<span class="token punctuation">.</span><span class="token function">spaceBetween</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="spacebetweencolumn" tabindex="-1">spaceBetweenColumn <a class="header-anchor" href="#spacebetweencolumn" aria-hidden="true">#</a></h3><p>垂直等分对齐</p><p><strong>参数：</strong></p><ul><li><p>pens: Pen[]<br> 画笔数组。默认为整个图纸</p></li><li><p>height: number<br> 高度。默认当前 pens 占据区域</p></li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">spaceBetweenColumn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

meta2d<span class="token punctuation">.</span><span class="token function">spaceBetweenColumn</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="layout" tabindex="-1">layout <a class="header-anchor" href="#layout" aria-hidden="true">#</a></h3><p>均匀分布排版</p><p><strong>参数：</strong></p><ul><li><p>pens: Pen[]<br> 画笔数组。默认为整个图纸</p></li><li><p>width: number<br> 宽度，超过换行。默认当前 pens 占据区域宽度。</p></li><li><p>space: number<br> 间距。默认 30</p></li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">layout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

meta2d<span class="token punctuation">.</span><span class="token function">layout</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="showmap" tabindex="-1">showMap <a class="header-anchor" href="#showmap" aria-hidden="true">#</a></h3><p>显示鹰眼地图</p><p><strong>参数：</strong><br> 无</p><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">showMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="hidemap" tabindex="-1">hideMap <a class="header-anchor" href="#hidemap" aria-hidden="true">#</a></h3><p>隐藏鹰眼地图</p><p><strong>参数：</strong><br> 无</p><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">hideMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="toggleanchormode" tabindex="-1">toggleAnchorMode <a class="header-anchor" href="#toggleanchormode" aria-hidden="true">#</a></h3><p>给 Pen 添加/取消添加锚点</p><p><strong>参数：</strong><br> 无</p><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">toggleAnchorMode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="addanchorhand" tabindex="-1">addAnchorHand <a class="header-anchor" href="#addanchorhand" aria-hidden="true">#</a></h3><p>给 选中锚点 添加手柄</p><p><strong>参数：</strong><br> 无</p><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">addAnchorHand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="removeanchorhand" tabindex="-1">removeAnchorHand <a class="header-anchor" href="#removeanchorhand" aria-hidden="true">#</a></h3><p>删除 选中锚点 的手柄</p><p><strong>参数：</strong><br> 无</p><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">removeAnchorHand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="toggleanchorhand" tabindex="-1">toggleAnchorHand <a class="header-anchor" href="#toggleanchorhand" aria-hidden="true">#</a></h3><p>给选中锚点 添加/删除 手柄</p><p><strong>参数：</strong><br> 无</p><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">toggleAnchorHand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="top" tabindex="-1">top <a class="header-anchor" href="#top" aria-hidden="true">#</a></h3><p>置顶画笔</p><p><strong>参数：</strong></p><ul><li><p>pen: <a href="./pen.html">Pen</a><br> 被置顶的画笔</p></li><li><p>pens: Pen[]<br> 置顶到哪个画笔数组。默认为整个图纸<br> 注意 pen 必须在该数组内才有效(bottom, up, down 同理)</p></li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span>pen<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="bottom" tabindex="-1">bottom <a class="header-anchor" href="#bottom" aria-hidden="true">#</a></h3><p>置底画笔</p><p><strong>参数：</strong></p><ul><li><p>pen: <a href="./pen.html">Pen</a><br> 被置底的画笔</p></li><li><p>pens: Pen[]<br> 置底到哪个画笔数组。默认为整个图纸</p></li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">bottom</span><span class="token punctuation">(</span>pen<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="up" tabindex="-1">up <a class="header-anchor" href="#up" aria-hidden="true">#</a></h3><p>移动画笔到上一层</p><p><strong>参数：</strong></p><ul><li><p>pen: <a href="./pen.html">Pen</a><br> 被移动的画笔</p></li><li><p>pens: Pen[]<br> 移动到哪个画笔数组。默认为整个图纸</p></li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">up</span><span class="token punctuation">(</span>pen<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="down" tabindex="-1">down <a class="header-anchor" href="#down" aria-hidden="true">#</a></h3><p>移动画笔到下一层</p><p><strong>参数：</strong></p><ul><li><p>pen: <a href="./pen.html">Pen</a><br> 被移动的画笔</p></li><li><p>pens: Pen[]<br> 移动到哪个画笔数组。默认为整个图纸</p></li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">down</span><span class="token punctuation">(</span>pen<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="setlayer" tabindex="-1">setLayer <a class="header-anchor" href="#setlayer" aria-hidden="true">#</a></h3><p>移动画笔到指定层</p><p><strong>参数：</strong></p><ul><li><p>pen: <a href="./pen.html">Pen</a><br> 被移动的画笔</p></li><li><p>index: number<br> 指定图层</p></li><li><p>pens: Pen[]<br> 移动到哪个画笔数组。默认为整个图纸</p></li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">setLayer</span><span class="token punctuation">(</span>pen<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="changepenid" tabindex="-1">changePenId <a class="header-anchor" href="#changepenid" aria-hidden="true">#</a></h3><p>修改画笔 id</p><p><strong>参数：</strong></p><ul><li><p>oldId: string<br> 旧 id</p></li><li><p>newId: string 新 id</p></li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">changePenId</span><span class="token punctuation">(</span><span class="token string">&#39;1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="getlines" tabindex="-1">getLines <a class="header-anchor" href="#getlines" aria-hidden="true">#</a></h3><p>获取 Pen 的关联连线</p><p><strong>参数：</strong></p><ul><li><p>pen: <a href="./pen.html">Pen</a><br> 画笔</p></li><li><p>type: &#39;all&#39; | &#39;in&#39; | &#39;out&#39; = &#39;all&#39;<br> 连线方向。默认所有方向</p></li></ul><p><strong>返回：</strong><br> Pen[]</p><p><strong>示例：</strong></p><div class="language-js"><pre><code><span class="token keyword">var</span> lines <span class="token operator">=</span> meta2d<span class="token punctuation">.</span><span class="token function">getLines</span><span class="token punctuation">(</span>pen<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="nextnode" tabindex="-1">nextNode <a class="header-anchor" href="#nextnode" aria-hidden="true">#</a></h3><p>获取 Pen 关联连线的下一个 Pen[]</p><p><strong>参数：</strong></p><ul><li>pen: <a href="./pen.html">Pen</a><br> 画笔</li></ul><p><strong>返回：</strong><br> Pen[]</p><p><strong>示例：</strong></p><div class="language-js"><pre><code><span class="token keyword">var</span> pens <span class="token operator">=</span> meta2d<span class="token punctuation">.</span><span class="token function">nextNode</span><span class="token punctuation">(</span>pen<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="previousnode" tabindex="-1">previousNode <a class="header-anchor" href="#previousnode" aria-hidden="true">#</a></h3><p>获取 Pen 关联连线的上一个 Pen[]</p><p><strong>参数：</strong></p><ul><li>pen: <a href="./pen.html">Pen</a><br> 画笔</li></ul><p><strong>返回：</strong><br> Pen[]</p><p><strong>示例：</strong></p><div class="language-js"><pre><code><span class="token keyword">var</span> pens <span class="token operator">=</span> meta2d<span class="token punctuation">.</span><span class="token function">previousNode</span><span class="token punctuation">(</span>pen<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="tocomponent" tabindex="-1">toComponent <a class="header-anchor" href="#tocomponent" aria-hidden="true">#</a></h3><p>生成自定义组件，方便直接（拖拽）复用。</p><p><strong>参数：</strong></p><ul><li><p>pens: <a href="./pen.html">Pen</a>[]<br> 画笔数组。默认整个画布</p></li><li><p>showChild: number</p><p>可选参数，默认无需传递。 若组合为 <a href="./../tutorial/data.html#状态">状态</a> ，需传递该参数，默认展示第一个即传 0 ，第二个 1。</p></li></ul><p><strong>返回：</strong><br> Pen[]。组合成一个组件的画笔数组对象（包含父子 Pen）</p><p><strong>示例：</strong></p><div class="language-js"><pre><code><span class="token keyword">const</span> pens <span class="token operator">=</span> meta2d<span class="token punctuation">.</span><span class="token function">toComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> pens <span class="token operator">=</span> meta2d<span class="token punctuation">.</span><span class="token function">toComponent</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="setvisible" tabindex="-1">setVisible <a class="header-anchor" href="#setvisible" aria-hidden="true">#</a></h3><p>设置画笔是否可见，并且修改子节点们的 visible。<br> 该方法不会重新渲染画布，执行后需要手动执行 render。</p><p><strong>参数：</strong></p><ul><li><p>pen: <a href="./pen.html">Pen</a><br> 画笔</p></li><li><p>visible: boolean<br> 可见</p></li><li><p>emit: boolean = false<br> 是否执行 valueUpdate 事件<br> 在 events 执行 js 代码中，该参数不可以为 true</p></li></ul><p><strong>示例：</strong></p><div class="language-js"><pre><code><span class="token keyword">const</span> pen <span class="token operator">=</span> meta2d<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
meta2d<span class="token punctuation">.</span><span class="token function">setVisible</span><span class="token punctuation">(</span>pen<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="destroy" tabindex="-1">destroy <a class="header-anchor" href="#destroy" aria-hidden="true">#</a></h3><p>销毁画布，清理资源内存。推荐调用</p><p><strong>参数：</strong><br> void</p><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="setbackgroundimage" tabindex="-1">setBackgroundImage <a class="header-anchor" href="#setbackgroundimage" aria-hidden="true">#</a></h3><p>更改背景图片</p><p><strong>参数：</strong><br> string</p><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">setBackgroundImage</span><span class="token punctuation">(</span><span class="token string">&#39;/img/logo.png&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="setbackgroundcolor" tabindex="-1">setBackgroundColor <a class="header-anchor" href="#setbackgroundcolor" aria-hidden="true">#</a></h3><p>更改背景颜色</p><p><strong>参数：</strong><br> string</p><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">setBackgroundColor</span><span class="token punctuation">(</span><span class="token string">&#39;#1890ff&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
meta2d<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="setgrid" tabindex="-1">setGrid <a class="header-anchor" href="#setgrid" aria-hidden="true">#</a></h3><p>更改背景网格</p><p><strong>参数：</strong><br> { grid: boolean; gridColor: string; gridSize: number; gridRotate: number }<br> 对象 object</p><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">setGrid</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  grid<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
meta2d<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="setrule" tabindex="-1">setRule <a class="header-anchor" href="#setrule" aria-hidden="true">#</a></h3><p>更改背景标尺</p><p><strong>参数：</strong><br> { rule: boolean; ruleColor: string; }<br> 对象 object</p><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code>meta2d<span class="token punctuation">.</span><span class="token function">setRule</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  rule<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
meta2d<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="getnext" tabindex="-1">getNext <a class="header-anchor" href="#getnext" aria-hidden="true">#</a></h3><p>获取当前画笔的所有下一个连接关系</p><p><strong>参数：</strong></p><ul><li>pen: <a href="./pen.html">Pen</a><br> 画笔</li></ul><p><strong>返回：</strong><br> [{ from: <a href="./pen.html">Pen</a>, //该节点<br> fromAnchor: <a href="./point.html">Point</a>, //该节点的连接锚点<br> line:<a href="./pen.html">Pen</a>, //连接线<br> to: <a href="./pen.html">Pen</a>, //被连接Pen<br> toAnchor: <a href="./point.html">Point</a>, //被连接pen的连接锚点<br> },...]</p><p><strong>示例：</strong></p><div class="language-js"><pre><code><span class="token keyword">const</span> pen <span class="token operator">=</span> meta2d<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
meta2d<span class="token punctuation">.</span><span class="token function">getNext</span><span class="token punctuation">(</span>pen<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="addanchor" tabindex="-1">addAnchor <a class="header-anchor" href="#addanchor" aria-hidden="true">#</a></h3><p>为画笔添加锚点(包括连线)</p><p><strong>参数：</strong></p><ul><li>pen: <a href="./pen.html">Pen</a><br> 画笔</li><li>anchor: <a href="./point.html">Point</a><br> 锚点，可以世界坐标，也可以是相对坐标</li><li>index:number<br> 添加的位置（连线），可选，默认0</li></ul><p><strong>返回：</strong><br> void</p><p><strong>示例：</strong></p><div class="language-js"><pre><code><span class="token keyword">const</span> pen <span class="token operator">=</span> meta2d<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
meta2d<span class="token punctuation">.</span><span class="token function">addAnchor</span><span class="token punctuation">(</span>pen<span class="token punctuation">,</span><span class="token punctuation">{</span>x<span class="token operator">:</span><span class="token number">0.5</span><span class="token punctuation">,</span>y<span class="token operator">:</span><span class="token number">0.5</span><span class="token punctuation">,</span>id<span class="token operator">:</span><span class="token string">&#39;anchor id&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> line <span class="token operator">=</span> meta2d<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
meta2d<span class="token punctuation">.</span><span class="token function">addAnchor</span><span class="token punctuation">(</span>line<span class="token punctuation">,</span><span class="token punctuation">{</span>x<span class="token operator">:</span><span class="token number">200</span><span class="token punctuation">,</span>y<span class="token operator">:</span><span class="token number">300</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//末尾添加</span>
</code></pre></div><h3 id="connectline" tabindex="-1">connectLine <a class="header-anchor" href="#connectline" aria-hidden="true">#</a></h3><p>连接两个画笔</p><p><strong>参数：</strong></p><ul><li>from: <a href="./pen.html">Pen</a><br> 连接画笔</li><li>to: <a href="./pen.html">Pen</a><br> 被连接画笔</li><li>fromAnchor: <a href="./point.html">Point</a><br> 连接画笔的连接锚点，可选，默认距离to最近的锚点</li><li>toAnchor: <a href="./point.html">Point</a><br> 被连接画笔的连接锚点，可选，默认距离from最近的锚点</li><li>render:[boolean] 是否触发重绘，默认是。（1.2.1版本以后)</li></ul><p><strong>返回：</strong></p><ul><li>line:<a href="./pen.html">Pen</a> 两个画笔的连线，（1.2.1版本以后)</li></ul><p><strong>示例：</strong></p><div class="language-js"><pre><code><span class="token keyword">const</span> from <span class="token operator">=</span> meta2d<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token string">&#39;from&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> to <span class="token operator">=</span> meta2d<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token string">&#39;to&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
meta2d<span class="token punctuation">.</span><span class="token function">connectLine</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span>to<span class="token punctuation">)</span><span class="token punctuation">;</span>
meta2d<span class="token punctuation">.</span><span class="token function">connectLine</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span>to<span class="token punctuation">,</span>from<span class="token punctuation">.</span>anchors<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>to<span class="token punctuation">.</span>anchors<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
meta2d<span class="token punctuation">.</span><span class="token function">connectLine</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span>to<span class="token punctuation">,</span>from<span class="token punctuation">.</span>calculative<span class="token punctuation">.</span>worldAnchors<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>to<span class="token punctuation">.</span>calculative<span class="token punctuation">.</span>worldAnchors<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-07c132fc><div class="edit" data-v-07c132fc><div class="edit-link" data-v-07c132fc data-v-1ed99556><!----></div></div><div class="updated" data-v-07c132fc><!----></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><!----></div><div class="next" data-v-38ede35f><a class="link" href="/api/canvas" data-v-38ede35f><span class="text" data-v-38ede35f>Canvas</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-38ede35f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"3d_editor_deep-dive_project.md\":\"ddc29a69\",\"3d_editor_deep-dive_scene.md\":\"7a37fa9b\",\"3d_editor_guide_firstproject.md\":\"9c2e74fb\",\"3d_editor_guide_introduction.md\":\"43d1caea\",\"3d_editor_guide_setanimations.md\":\"cd982951\",\"3d_editor_guide_setcustomdatas.md\":\"3aad6b8f\",\"3d_editor_guide_setdynamicdatas.md\":\"a8e2af73\",\"3d_editor_guide_setevents.md\":\"f14f19bf\",\"3d_editor_guide_view.md\":\"debb8366\",\"3d_meta3d_introduction_index.md\":\"e8b34149\",\"about_join.md\":\"4b191f6a\",\"about_us.md\":\"d65ac540\",\"api_canvas.md\":\"6f94b3f9\",\"api_core.md\":\"012b49d1\",\"api_layout.md\":\"d88c3c8c\",\"api_pen.md\":\"86c15d2f\",\"api_point.md\":\"fc86d380\",\"api_rect.md\":\"ebdac744\",\"api_utils.md\":\"f36eeb1b\",\"awesome_home.md\":\"75ab99f9\",\"community_gitee.md\":\"de1dad99\",\"community_github.md\":\"ae448908\",\"community_wechat.md\":\"55f5e5a0\",\"home.md\":\"78336418\",\"index.md\":\"2c0d9516\",\"instruction_home.md\":\"b45b4f90\",\"resources_install.md\":\"488f3d38\",\"tutorial_animate.md\":\"a0ad9d0f\",\"tutorial_architecture.md\":\"a84313bf\",\"tutorial_attention.md\":\"4050c927\",\"tutorial_auto-anchor.md\":\"17827520\",\"tutorial_changelog.md\":\"d65a621d\",\"tutorial_charts.md\":\"2ec89b8b\",\"tutorial_commercial-api.md\":\"7d469e3d\",\"tutorial_commercial-trial.md\":\"12ec5ba8\",\"tutorial_commercial.md\":\"dfa08bbc\",\"tutorial_data.md\":\"215762d5\",\"tutorial_drag.md\":\"589aa913\",\"tutorial_events.md\":\"467c2966\",\"tutorial_faq.md\":\"618de23d\",\"tutorial_forms.md\":\"26dbf6b7\",\"tutorial_grid.md\":\"e908ae87\",\"tutorial_icons.md\":\"d4b7d365\",\"tutorial_introduction.md\":\"52f6632d\",\"tutorial_keyboards.md\":\"bf38dc90\",\"tutorial_layout.md\":\"156952c7\",\"tutorial_lifecycle.md\":\"0ddf6674\",\"tutorial_line-ai.md\":\"b3b708e1\",\"tutorial_magnifier.md\":\"236294a4\",\"tutorial_make-component.md\":\"7baf10e5\",\"tutorial_map.md\":\"4139f342\",\"tutorial_meta2d.md\":\"76799811\",\"tutorial_pen-draw.md\":\"7d092800\",\"tutorial_pen.md\":\"17f8abb7\",\"tutorial_pencil.md\":\"7aaaa88b\",\"tutorial_pens.md\":\"f88f4afa\",\"tutorial_progress.md\":\"b575da1b\",\"tutorial_right-menu.md\":\"ca128039\",\"tutorial_rule.md\":\"7fcc7c21\",\"tutorial_service-data.md\":\"3f9d78a2\",\"tutorial_start.md\":\"fca3e999\",\"tutorial_svg-to-combine.md\":\"f88997b7\",\"tutorial_table.md\":\"37724b03\",\"tutorial_tuxingku.md\":\"2438e5e3\",\"tutorial_updatelog.md\":\"7656df81\",\"tutorial_video.md\":\"7da05331\",\"videos_home.md\":\"92153e0d\"}")</script>
    <script type="module" async src="/assets/app.7a90af25.js"></script>
    
  </body>
</html>